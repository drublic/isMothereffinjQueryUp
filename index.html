<!doctype html public "<!doctype html">
<meta charset="utf-8">

<title>Is the new jQuery-version already up?</title>
<meta name="description" content="Check out if the latest version* of jQuery is already up on the major CDNs">
<meta name="author" content="Hans Christian Reinl">

<meta name="viewport" content="width=device-width,initial-scale=1">

<link rel="stylesheet" href="css/styles.css">

<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<header>
  <h1><span>Is the mothereffin' latest</span> jQuery-version <span>already up?</span></h1>
  <p>Check out if the latest version* of jQuery is already up on the major <abbr title="Content Delivery Network">CDN</abbr>s.</p>
  <p class="refresh"><a href="#" class="button">Refresh</a></p>
</header>
<h2>The current version is <span>1.7.0</span></h2>

<div id="libs">
  <section class="jquery">
    <p class="full button">jQuery CDN - Full</p>
    <p class="min button">jQuery CDN - Minimized</p>
  </section>
  
  <section class="google">
    <p class="full button">Google CDN - Full</p>
    <p class="min button">Google CDN - Minimized</p>
  </section>
  
  <section class="ms">
    <p class="full button">Microsoft CDN - Full</p>
    <p class="min button">Microsoft CDN - Minimized</p>
  </section>
</div>


<footer>
  <p>*) latest version refers to the <a href="http://code.jquery.com/jquery-latest.js">jQuery-latest.js</a> file on the jQuery CDN as this might be the first file to be updated.</p>
  
  <p>This page is created by <a href="http://drublic.de/blog" title="A Wedesign Blog - HTML5, CSS3 and JavaScript - Cutting Edge techlogoies">drublic</a> and is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License (CC BY-SA 3.0)</a>.</p>
  <p><a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="img/license.png" alt="Creative Commons License" width="80" height="15"></a></p>
  
  <p class="social">
    <g:plusone size="medium"></g:plusone>
    <a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-related="drublic:Creator of this app">Tweet</a>
  </p>
</footer>


<div id="message">
  <p>Sorry dude, I cannot get a proper connection to the net. There's something wrong.</p>
</div>


<script src="https://apis.google.com/js/plusone.js"></script>
<script src="//platform.twitter.com/widgets.js"></script>


<script>
  // $-save with IIFE
  +function($) {
    
    // Save current version
    var current = $.fn.jquery;
    
    // Update the heading with current version
    $('h2 span').text(current);

    // tests if a script is available
    // @param name - identifier for sections
    // @param src - source of script
    function test(name, src) {
      $.getScript(src, function(xhr, status) {
        if (status == 'success') {
          $('.' + name.replace(/-/, ' .') ).addClass('yep');
        }
      });
    }

    // Test the given CDNs
    function runTests() {
      test('google-full', 'http://ajax.googleapis.com/ajax/libs/jquery/' + current + '/jquery.js');
      test('google-min', 'http://ajax.googleapis.com/ajax/libs/jquery/' + current + '/jquery.min.js');
      test('jquery-full', 'http://code.jquery.com/jquery-' + current + '.js' );
      test('jquery-min', 'http://code.jquery.com/jquery-' + current + '.min.js' );
      test('ms-full', 'http://ajax.aspnetcdn.com/ajax/jQuery/jquery-' + current + '.js' );
      test('ms-min', 'http://ajax.aspnetcdn.com/ajax/jQuery/jquery-' + current + '.min.js' );
    }
    runTests();
    
    // If no answer after a second it's not there
    // If the network is just slow, the file will be displayed as "not available"
    // and will turn "available" when the request has finished
    setTimeout( function() {
      $('section p:not(.yep)').addClass('nope');
    }, 3000);
    
    // Run tests again
    $('.refresh a').click( function() {
      $('section p').removeClass('yep nope');
      runTests();
    });

  } (jQuery);
</script>

<!-- Piwik --> 
<script src="http://drublic.de/piwik/piwik.js"></script>
<script>
try {
var pkBaseURL = 'http://drublic.de/piwik/',
    piwikTracker = Piwik.getTracker(pkBaseURL + 'piwik.php', 2);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<noscript><img src="http://drublic.de/piwik/piwik.php?idsite=2" alt=""></noscript>